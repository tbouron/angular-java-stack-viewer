!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("angular")):"function"==typeof define&&define.amd?define("angular-java-stack-viewer",["angular"],n):"object"==typeof exports?exports["angular-java-stack-viewer"]=n(require("angular")):e["angular-java-stack-viewer"]=n(e.angular)}(this,function(e){return function(e){function n(t){if(a[t])return a[t].exports;var r=a[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var a={};return n.m=e,n.c=a,n.p="",n(0)}([function(e,n,a){e.exports=a(6)},,,,,,function(e,n,a){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function r(e){function n(n){n.stack=new l.parser.Stack(n.vendors),n.$watch("vendors",function(){n.stack=new l.parser.Stack(n.vendors),n.stack.parse(n.trace),e(function(){o.angular.element(document.querySelector(".app")).addClass("main-error")})},!0),n.$watch("trace",function(){n.stack.parse(n.trace),e(function(){o.angular.element(document.querySelector(".app")).addClass("main-error")})})}return{restrict:"EA",templateUrl:s["default"],scope:{trace:"=",vendors:"="},link:n}}Object.defineProperty(n,"__esModule",{value:!0}),n.stackViewerDirective=r;var i=a(7),s=t(i),o=a(8),l=a(9),c="tb.stack-viewer";o.angular.module(c,[]).directive("tbStackViewer",["$timeout",r]),n["default"]=c},function(e,n){var a="templates/stack-viewer.html",t='<div ng-repeat="group in stack.groups track by $index" class=group ng-init="group.isCollapsed = true" ng-class="{\'has-exception\': group.exception, active: !group.isCollapsed && group.stackPackage.isVendor}"> <div ng-if=group.exception class="alert alert-warning"><span class="label label-warning">{{group.exception.exception}}</span>&nbsp;{{group.exception.message}}</div> <ul ng-class="{vendor: group.stackPackage.isVendor}"> <li ng-if=group.stackPackage.isVendor class=line> <span ng-click="group.isCollapsed = !group.isCollapsed" class=vendor-header> <span class="vendor-name label label-info">{{group.stackPackage.name}}</span>&nbsp; <small class="vendor-calls text-muted">{{group.lines.length}} more calls</small> </span> <ul class=vendor-body> <li ng-repeat="line in group.lines track by $index" class=line> {{line.javaClass}}.{{line.method}}&nbsp;<span class="label label-line" ng-if="line.line >= 0">line {{line.line}}</span> </li> </ul> </li> <li ng-if=!group.stackPackage.isVendor ng-repeat="line in group.lines track by $index" class="line app"> {{line.javaClass}}.{{line.method}}&nbsp;<span class="label label-line" ng-if="line.line >= 0">line {{line.line}}</span> </li> </ul> </div> ';window.angular.module("ng").run(["$templateCache",function(e){e.put(a,t)}]),e.exports=a},function(n,a){n.exports=e},function(e,n,a){!function(n,a){e.exports=a()}(this,function(){return function(e){function n(t){if(a[t])return a[t].exports;var r=a[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var a={};return n.m=e,n.c=a,n.p="",n(0)}([function(e,n){"use strict";function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var t=function(){function e(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,a,t){return a&&e(n.prototype,a),t&&e(n,t),n}}(),r=/([\w\d\.]*exception)\:\s*(.*)$/i,i=/((([\d\w]*\.)*[\d\w]*)\.)?([\d\w\$]*)\.([\d\w\$]*)\(([\d\w\.\s]*)(\:(\d*))?\)/,s=n.StackPackage=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a(this,e),!n||0===n.trim().length)throw new Error("Cannot create stack package: name is not defined");if(!(t&&t instanceof Array))throw new Error("Cannot create stack package: aliases is not defined or of a wrong type");this.name=n,this.aliases=t,this.isVendor=r,String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.indexOf(e)})}return t(e,[{key:"equals",value:function(e){if(!e)return!1;if(e.name===this.name)return!0;for(var n=0;n<this.aliases.length;n++)if(this.aliases[n]===e.name||e.name.startsWith(this.aliases[n]))return!0;return!1}}]),e}(),o=n.StackLine=function c(e,n,t,r,i){if(a(this,c),!(e&&e instanceof s))throw new Error("Cannot create stack line: stack package is null or of a wrong type");this.stackPackage=e,this.javaClass=n||"Unknown",this.method=t||"Unknown",this.source=r||"Unknown",this.line=i?parseInt(i,10):-1},l=n.StackGroup=function(){function e(n){if(a(this,e),!(n&&n instanceof s))throw new Error("Cannot create stack group: stack package is null or of a wrong type");this.stackPackage=n,this.lines=[]}return t(e,[{key:"addLine",value:function(e){e instanceof o&&this.lines.push(e)}},{key:"addException",value:function(e,n){this.exception={exception:e,message:n}}}]),e}();n.Stack=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.groups=[],this.vendorPackages=[];var t=!0,r=!1,i=void 0;try{for(var o,l=Object.keys(n)[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var c=o.value;this.vendorPackages.push(new s(c,n[c],(!0)))}}catch(u){r=!0,i=u}finally{try{!t&&l["return"]&&l["return"]()}finally{if(r)throw i}}}return t(e,[{key:"parse",value:function(e){var n=this;this.groups=[];var a=null,t=e.split("\n");t.forEach(function(e){null===a&&(a=e.trim().match(r));var t=e.trim().match(i);if(null!==t){var c=new s(t[2]||"Unknown");for(var u in n.vendorPackages)if(n.vendorPackages[u].equals(c)){c=n.vendorPackages[u];break}var p=new o(c,t[4],t[5],t[6],t[8]);0===n.groups.length&&n.groups.push(new l(c));var d=n.groups[n.groups.length-1];d.stackPackage.equals(c)||(d=new l(c),n.groups.push(d)),d.addLine(p),null!==a&&(d.addException(a[1],a[2]),a=null)}})}}]),e}()}])})}])});
//# sourceMappingURL=angular-java-stack-viewer-nocss.min.js.map