!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("angular")):"function"==typeof define&&define.amd?define("angular-java-stack-viewer",["angular"],n):"object"==typeof exports?exports["angular-java-stack-viewer"]=n(require("angular")):e["angular-java-stack-viewer"]=n(e.angular)}(this,function(e){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0}),t(2);var o=t(6),a=r(o);n["default"]=a["default"],a["default"].exports=n["default"]},,function(e,n,t){var r=t(3);"string"==typeof r&&(r=[[e.id,r,""]]);t(5)(r,{});r.locals&&(e.exports=r.locals)},function(e,n,t){n=e.exports=t(4)(),n.push([e.id,".line{list-style:none;display:flex;flex-direction:row;position:relative;align-items:center;margin-bottom:1em}.line:before{content:'';display:inline-flex;background-color:#fff;border:.25em solid #cbcbcb;border-radius:50%;width:1.8em;height:1.8em;min-width:1.8em;min-height:1.8em;margin-right:1em;z-index:2}.line:after{content:'';position:absolute;display:block;border-left:.25em solid #cbcbcb;height:1.8em;top:1.7em;left:.775em;z-index:-1}.line:last-child{margin-bottom:0}.line:last-child:after{content:none}.vendor>.line{flex-wrap:wrap}.vendor>.line>.vendor-body{display:none;width:100%;margin-top:1.2em}.vendor>.line>.vendor-body:before{top:0;transform:rotate(-45deg)}.vendor>.line>.vendor-body:after,.vendor>.line>.vendor-body:before{content:'';display:inline-block;position:absolute;left:2em;background-color:#cbcbcb;width:.25em;height:4.5em;z-index:-1}.vendor>.line>.vendor-body:after{bottom:-2.8em;transform:rotate(45deg)}.vendor .vendor-header{cursor:pointer}.vendor .vendor-header:hover .vendor-name{background-color:#31b0d5}.vendor .vendor-header:hover .vendor-calls{color:#333}.group{position:relative}.group>ul{padding:0;margin-bottom:1em}.group>ul:before{content:'';position:absolute;display:inline-block;border-left:.25em dotted #cbcbcb;height:1.8em;top:-1.8em;left:.775em;z-index:-2}.group:first-child>ul:before{top:0}.group.has-exception>ul:before{height:inherit;bottom:0}.group.active.has-exception>ul:before{bottom:-1.8em}.group.active .line>.vendor-body{display:block}.group.active+.group>ul:before,.group:last-child .vendor-body:after{content:none}.main-error{color:#d9534f;font-weight:700}.main-error:before{border-color:#d9534f;border-width:8px}.label-line{background-color:#eee;font-family:monospace;font-weight:400;color:#a5a5a5}.container-fluid{margin-top:15px}",""])},function(e,n){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],n=0;n<this.length;n++){var t=this[n];t[2]?e.push("@media "+t[2]+"{"+t[1]+"}"):e.push(t[1])}return e.join("")},e.i=function(n,t){"string"==typeof n&&(n=[[null,n,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<n.length;o++){var i=n[o];"number"==typeof i[0]&&r[i[0]]||(t&&!i[2]?i[2]=t:t&&(i[2]="("+i[2]+") and ("+t+")"),e.push(i))}},e}},function(e,n,t){function r(e,n){for(var t=0;t<e.length;t++){var r=e[t],o=f[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(c(r.parts[a],n))}else{for(var i=[],a=0;a<r.parts.length;a++)i.push(c(r.parts[a],n));f[r.id]={id:r.id,refs:1,parts:i}}}}function o(e){for(var n=[],t={},r=0;r<e.length;r++){var o=e[r],a=o[0],i=o[1],s=o[2],l=o[3],c={css:i,media:s,sourceMap:l};t[a]?t[a].parts.push(c):n.push(t[a]={id:a,parts:[c]})}return n}function a(e,n){var t=v(),r=k[k.length-1];if("top"===e.insertAt)r?r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):t.insertBefore(n,t.firstChild),k.push(n);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");t.appendChild(n)}}function i(e){e.parentNode.removeChild(e);var n=k.indexOf(e);n>=0&&k.splice(n,1)}function s(e){var n=document.createElement("style");return n.type="text/css",a(e,n),n}function l(e){var n=document.createElement("link");return n.rel="stylesheet",a(e,n),n}function c(e,n){var t,r,o;if(n.singleton){var a=b++;t=m||(m=s(n)),r=u.bind(null,t,a,!1),o=u.bind(null,t,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(t=l(n),r=p.bind(null,t),o=function(){i(t),t.href&&URL.revokeObjectURL(t.href)}):(t=s(n),r=d.bind(null,t),o=function(){i(t)});return r(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;r(e=n)}else o()}}function u(e,n,t,r){var o=t?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(n,o);else{var a=document.createTextNode(o),i=e.childNodes;i[n]&&e.removeChild(i[n]),i.length?e.insertBefore(a,i[n]):e.appendChild(a)}}function d(e,n){var t=n.css,r=n.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}function p(e,n){var t=n.css,r=n.sourceMap;r&&(t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([t],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var f={},g=function(e){var n;return function(){return"undefined"==typeof n&&(n=e.apply(this,arguments)),n}},h=g(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=g(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,b=0,k=[];e.exports=function(e,n){n=n||{},"undefined"==typeof n.singleton&&(n.singleton=h()),"undefined"==typeof n.insertAt&&(n.insertAt="bottom");var t=o(e);return r(t,n),function(e){for(var a=[],i=0;i<t.length;i++){var s=t[i],l=f[s.id];l.refs--,a.push(l)}if(e){var c=o(e);r(c,n)}for(var i=0;i<a.length;i++){var l=a[i];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete f[l.id]}}}};var y=function(){var e=[];return function(n,t){return e[n]=t,e.filter(Boolean).join("\n")}}()},function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){function n(n){n.stack=new l.parser.Stack(n.vendors),n.$watch("vendors",function(){n.stack=new l.parser.Stack(n.vendors),n.stack.parse(n.trace),e(function(){s.angular.element(document.querySelector(".app")).addClass("main-error")})},!0),n.$watch("trace",function(){n.stack.parse(n.trace),e(function(){s.angular.element(document.querySelector(".app")).addClass("main-error")})})}return{restrict:"EA",templateUrl:i["default"],scope:{trace:"=",vendors:"="},link:n}}Object.defineProperty(n,"__esModule",{value:!0}),n.stackViewerDirective=o;var a=t(7),i=r(a),s=t(8),l=t(9),c="tb.stack-viewer";s.angular.module(c,[]).directive("tbStackViewer",["$timeout",o]),n["default"]=c},function(e,n){var t="templates/stack-viewer.html",r='<div ng-repeat="group in stack.groups track by $index" class=group ng-init="group.isCollapsed = true" ng-class="{\'has-exception\': group.exception, active: !group.isCollapsed && group.stackPackage.isVendor}"> <div ng-if=group.exception class="alert alert-warning"><span class="label label-warning">{{group.exception.exception}}</span>&nbsp;{{group.exception.message}}</div> <ul ng-class="{vendor: group.stackPackage.isVendor}"> <li ng-if=group.stackPackage.isVendor class=line> <span ng-click="group.isCollapsed = !group.isCollapsed" class=vendor-header> <span class="vendor-name label label-info">{{group.stackPackage.name}}</span>&nbsp; <small class="vendor-calls text-muted">{{group.lines.length}} more calls</small> </span> <ul class=vendor-body> <li ng-repeat="line in group.lines track by $index" class=line> {{line.javaClass}}.{{line.method}}&nbsp;<span class="label label-line" ng-if="line.line >= 0">line {{line.line}}</span> </li> </ul> </li> <li ng-if=!group.stackPackage.isVendor ng-repeat="line in group.lines track by $index" class="line app"> {{line.javaClass}}.{{line.method}}&nbsp;<span class="label label-line" ng-if="line.line >= 0">line {{line.line}}</span> </li> </ul> </div> ';window.angular.module("ng").run(["$templateCache",function(e){e.put(t,r)}]),e.exports=t},function(n,t){n.exports=e},function(e,n,t){!function(n,t){e.exports=t()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=/([\w\d\.]*exception)\:\s*(.*)$/i,a=/((([\d\w]*\.)*[\d\w]*)\.)?([\d\w\$]*)\.([\d\w\$]*)\(([\d\w\.\s]*)(\:(\d*))?\)/,i=n.StackPackage=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t(this,e),!n||0===n.trim().length)throw new Error("Cannot create stack package: name is not defined");if(!(r&&r instanceof Array))throw new Error("Cannot create stack package: aliases is not defined or of a wrong type");this.name=n,this.aliases=r,this.isVendor=o,String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.indexOf(e)})}return r(e,[{key:"equals",value:function(e){if(!e)return!1;if(e.name===this.name)return!0;for(var n=0;n<this.aliases.length;n++)if(this.aliases[n]===e.name||e.name.startsWith(this.aliases[n]))return!0;return!1}}]),e}(),s=n.StackLine=function c(e,n,r,o,a){if(t(this,c),!(e&&e instanceof i))throw new Error("Cannot create stack line: stack package is null or of a wrong type");this.stackPackage=e,this.javaClass=n||"Unknown",this.method=r||"Unknown",this.source=o||"Unknown",this.line=a?parseInt(a,10):-1},l=n.StackGroup=function(){function e(n){if(t(this,e),!(n&&n instanceof i))throw new Error("Cannot create stack group: stack package is null or of a wrong type");this.stackPackage=n,this.lines=[]}return r(e,[{key:"addLine",value:function(e){e instanceof s&&this.lines.push(e)}},{key:"addException",value:function(e,n){this.exception={exception:e,message:n}}}]),e}();n.Stack=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),this.groups=[],this.vendorPackages=[];var r=!0,o=!1,a=void 0;try{for(var s,l=Object.keys(n)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;this.vendorPackages.push(new i(c,n[c],(!0)))}}catch(u){o=!0,a=u}finally{try{!r&&l["return"]&&l["return"]()}finally{if(o)throw a}}}return r(e,[{key:"parse",value:function(e){var n=this;this.groups=[];var t=null,r=e.split("\n");r.forEach(function(e){null===t&&(t=e.trim().match(o));var r=e.trim().match(a);if(null!==r){var c=new i(r[2]||"Unknown");for(var u in n.vendorPackages)if(n.vendorPackages[u].equals(c)){c=n.vendorPackages[u];break}var d=new s(c,r[4],r[5],r[6],r[8]);0===n.groups.length&&n.groups.push(new l(c));var p=n.groups[n.groups.length-1];p.stackPackage.equals(c)||(p=new l(c),n.groups.push(p)),p.addLine(d),null!==t&&(p.addException(t[1],t[2]),t=null)}})}}]),e}()}])})}])});
//# sourceMappingURL=angular-java-stack-viewer.min.js.map